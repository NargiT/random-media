<!DOCTYPE html>
<html>
<head>
	<title>Tv media</title>
	<script src="http://code.jquery.com/jquery-2.1.1.js" type="application/javascript"></script>
	<script type="text/javascript" src="js/observer/ObserverPattern.js"></script>
	<script type="text/javascript" src="js/randommedias/medias/Media.js"></script>
	<script type="text/javascript" src="js/randommedias/Screen.js"></script>
	<script type="text/javascript" src="js/randommedias/medias/packages/Joieducode.js"></script>
	<script type="text/javascript" src="js/randommedias/medias/packages/Codeloving.js"></script>
	<script type="text/javascript" src="js/randommedias/medias/packages/Xkcd.js"></script>
</head>
<body>
<style type="text/css">
.container {
	text-align: center;
	margin: auto;
}
</style>
<div class="container">
	<h3 id="myTitle"></h3>
	<img id="myImage" src=""/>
</div>
<script>
	$(document).ready(function () {
		var myapp = new Screen([
			new JoieDuCode(),
			new Xkcd(),
			new Codeloving()
		]);

		$(document).bind(myapp.PUBLIC_TOPIC, function (event, media) {
			console.log("public notification received:" + media.title + " [" + media.url + "]");
			$("#myTitle").html(media.title);
			var image = new Image();
			image.src = media.url;
			$("#myImage").attr("src", media.url);
		});

		console.info(myapp.mediaNames());
		myapp.updateMedia();
		setInterval(function () {
			myapp.updateMedia()
		}, 30000);
	});
</script>
</body>
</html>
